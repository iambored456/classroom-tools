(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=l(o);fetch(o.href,r)}})();const a={lastText:"readAlong:lastText",textColor:"readAlong:textColor",backgroundColor:"readAlong:backgroundColor",highlightBgColor:"readAlong:highlightBgColor",highlightTextColor:"readAlong:highlightTextColor",fontSize:"readAlong:fontSize"},v=`This is an example text.

Use the arrow keys to move the highlight through the words,
and adjust settings using the sidebar!

Click any word to jump to that word. The first word starts in the middle of the window and remains centered as you progress.`;let s=[],c=0,u=null;const m=document.getElementById("text-container"),T=document.getElementById("chevron"),x=document.getElementById("sidebar"),I=document.getElementById("apply-btn");function C(){const t=document.getElementById("text-input"),e=localStorage.getItem(a.lastText);t.value=e!==null?e:v;const l=localStorage.getItem(a.textColor);l!==null&&(document.getElementById("text-color").value=l,document.documentElement.style.setProperty("--text-color",l));const n=localStorage.getItem(a.backgroundColor);n!==null&&(document.getElementById("background-color").value=n,document.documentElement.style.setProperty("--background-color",n));const o=localStorage.getItem(a.highlightBgColor);o!==null&&(document.getElementById("highlight-bg-color").value=o,document.documentElement.style.setProperty("--highlight-bg-color",o));const r=localStorage.getItem(a.highlightTextColor);r!==null&&(document.getElementById("highlight-text-color").value=r,document.documentElement.style.setProperty("--highlight-text-color",r));const i=localStorage.getItem(a.fontSize);i!==null&&(m.style.fontSize=i)}T.addEventListener("click",()=>{x.classList.toggle("open")});I.addEventListener("click",()=>{const t=document.getElementById("text-input").value,e=document.getElementById("text-color").value,l=document.getElementById("background-color").value,n=document.getElementById("highlight-bg-color").value,o=document.getElementById("highlight-text-color").value;localStorage.setItem(a.lastText,t),localStorage.setItem(a.textColor,e),localStorage.setItem(a.backgroundColor,l),localStorage.setItem(a.highlightBgColor,n),localStorage.setItem(a.highlightTextColor,o),document.documentElement.style.setProperty("--text-color",e),document.documentElement.style.setProperty("--background-color",l),document.documentElement.style.setProperty("--highlight-bg-color",n),document.documentElement.style.setProperty("--highlight-text-color",o),E(t),x.classList.remove("open")});document.querySelectorAll(".text-size-btn").forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-size")+"px";m.style.fontSize=e,localStorage.setItem(a.fontSize,e),g()})});function E(t){m.innerHTML="",s=[],t&&(t.split(/\n+/).forEach(e=>{const l=document.createElement("p"),n=e.split(/\s+/);n.forEach((o,r)=>{if(o==="")return;const i=document.createElement("span");i.className="word",i.textContent=o+(r!==n.length-1?" ":""),i.dataset.index=String(s.length),i.addEventListener("click",function(){c=parseInt(this.dataset.index),h(),g()}),l.appendChild(i),s.push(i)}),m.appendChild(l)}),c=0,h(),g())}function y(t){return/^[.,;:!?]+$/.test(t)}function h(){s.forEach((t,e)=>{t.classList.toggle("highlighted",e<=c)})}function S(t,e,l){u!==null&&(cancelAnimationFrame(u),u=null);const n=t.scrollTop,o=e-n;let r=null;function i(d){return d<.5?2*d*d:-1+(4-2*d)*d}function f(d){r===null&&(r=d);const p=d-r;t.scrollTop=n+o*i(Math.min(p/l,1)),p<l?u=window.requestAnimationFrame(f):u=null}u=window.requestAnimationFrame(f)}function g(){const t=s[c];if(!t)return;const e=t.offsetTop-m.clientHeight/2+t.offsetHeight/2;S(m,e,400)}document.addEventListener("keydown",t=>{if(!(t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA")){if(t.key==="ArrowRight"){let e=c+1;for(;e<s.length&&y(s[e].textContent?.trim()??"");)e++;e<s.length&&(c=e,h(),g()),t.preventDefault()}else if(t.key==="ArrowLeft"){let e=c-1;for(;e>=0&&y(s[e].textContent?.trim()??"");)e--;e>=0&&(c=e,h(),g()),t.preventDefault()}else if(t.key==="ArrowUp"){const e=s[c].offsetTop;let l=null;for(let n=c-1;n>=0;n--)if(s[n].offsetTop<e){l=n;break}l!==null&&(c=l,h(),g()),t.preventDefault()}else if(t.key==="ArrowDown"){const e=s[c].offsetTop;let l=null;for(let n=c+1;n<s.length;n++)if(s[n].offsetTop>e){l=n;break}l!==null&&(c=l,h(),g()),t.preventDefault()}}});window.addEventListener("load",()=>{C(),E(document.getElementById("text-input").value)});
